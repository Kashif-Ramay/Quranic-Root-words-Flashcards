<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentic Quranic Arabic Flashcards - English Only</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white; min-height: 100vh; padding: 15px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { font-size: 2.2em; margin-bottom: 8px; }
        .subtitle { font-size: 1.1em; opacity: 0.9; margin-bottom: 10px; }
        
        .progress-info {
            display: flex; justify-content: space-between; align-items: center;
            margin: 10px 0; flex-wrap: wrap; gap: 10px;
        }
        .counter { font-size: 1.1em; opacity: 0.9; }
        .progress-stats { font-size: 0.9em; opacity: 0.8; }
        
        .search-box {
            width: 100%; padding: 12px; font-size: 16px; border: none;
            border-radius: 10px; margin-bottom: 20px;
            background: rgba(255,255,255,0.9); color: #333;
        }
        
        .card {
            background: rgba(255,255,255,0.1); border-radius: 16px; padding: 25px;
            margin: 20px 0; backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2); position: relative;
        }
        .card.read { background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }
        
        .read-status {
            position: absolute; top: 10px; right: 10px; width: 20px; height: 20px;
            border-radius: 50%; background: rgba(255,255,255,0.2); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; transition: all 0.3s;
        }
        .read-status.read { background: #22c55e; color: white; }
        
        .badges { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
        .badge {
            background: rgba(34,197,94,0.8); padding: 4px 10px;
            border-radius: 12px; font-size: 11px; text-transform: uppercase;
        }
        .badge-soft { background: rgba(255,255,255,0.2); }
        
        .arabic {
            font-size: 2.8em; font-weight: bold; text-align: center; margin: 20px 0;
            font-family: 'Amiri', 'Scheherazade New', 'Traditional Arabic', serif;
            direction: rtl; unicode-bidi: bidi-override;
        }
        .transliteration {
            font-size: 1.3em; font-style: italic; text-align: center;
            opacity: 0.9; margin: 12px 0;
        }
        .meanings {
            font-size: 1.2em; text-align: center;
            background: rgba(255,255,255,0.1); padding: 15px;
            border-radius: 10px; margin: 15px 0; line-height: 1.4;
        }
        .meaning-english { text-align: center; }
        
        .section {
            margin: 20px 0; background: rgba(255,255,255,0.05);
            padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
        }
        .section-title {
            font-size: 12px; color: #fbbf24; margin-bottom: 10px;
            text-transform: uppercase; font-weight: bold;
        }
        
        .verse {
            margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.1);
            border-radius: 10px; border-left: 4px solid #fbbf24;
        }
        .verse-arabic {
            font-size: 20px; margin-bottom: 12px; line-height: 2;
            text-align: right; direction: rtl;
            font-family: 'Amiri', 'Scheherazade New', 'Traditional Arabic', serif;
        }
        .verse-translation { margin-bottom: 8px; }
        .translation-english {
            font-size: 14px; opacity: 0.95; line-height: 1.6;
            text-align: left; direction: ltr;
        }
        .verse-ref {
            font-size: 12px; color: #fbbf24; font-weight: bold; text-align: center;
        }
        
        .controls {
            display: flex; justify-content: center; gap: 12px;
            margin-top: 25px; flex-wrap: wrap;
        }
        button {
            background: #059669; color: white; border: none;
            padding: 12px 20px; border-radius: 8px; font-size: 14px;
            cursor: pointer; transition: background 0.3s; font-weight: 600;
        }
        button:hover { background: #047857; }
        button:disabled { background: #6b7280; cursor: not-allowed; }
        .toggle-btn { background: #7c3aed; }
        .toggle-btn:hover { background: #6d28d9; }
        
        .progress-bar {
            width: 100%; height: 6px; background: rgba(255,255,255,0.2);
            border-radius: 3px; margin: 10px 0; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #10b981, #22c55e);
            border-radius: 3px; transition: width 0.5s ease;
        }
        
        .loading {
            text-align: center; padding: 40px; font-size: 1.2em; opacity: 0.8;
        }
        
        @media (max-width: 600px) {
            .header h1 { font-size: 1.8em; }
            .arabic { font-size: 2.2em; }
            .card { padding: 20px; }
            .controls { gap: 8px; }
            button { padding: 10px 16px; font-size: 13px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🕌 Authentic Quranic Arabic Flashcards</h1>
            <div class="subtitle">English Only - 981 Authentic Roots</div>
            
            <div class="progress-info">
                <div class="counter">
                    <span id="current">1</span> of <span id="total">981</span>
                    <span class="verse-count">📖 Loading...</span>
                </div>
                <div class="progress-stats">
                    <span id="readCount">0</span> read • <span id="progressPercent">0%</span> complete
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        
        <input type="text" class="search-box" id="searchBox" placeholder="Search in English or Urdu...">
        
        <div class="card" id="mainCard">
            <div class="read-status" id="readStatus" title="Mark as read">○</div>
            <div class="badges">
                <span id="typeBadge" class="badge">ROOT</span>
                <span id="categoryBadge" class="badge badge-soft">Loading</span>
                <span id="difficultyBadge" class="badge badge-soft">...</span>
            </div>
            
            <div class="arabic" id="arabic">ك ت ب</div>
            <div class="transliteration" id="transliteration">k-t-b</div>
            <div class="meanings" id="meanings">
                to write, book, decree
            </div>
            
            <div class="section" id="versesSection" style="display:none;">
                <div class="section-title">📖 Quranic Examples <span id="verseCount"></span></div>
                <div id="verses"></div>
            </div>
        </div>
        
        <div class="controls">
            <button onclick="previousCard()" id="prevBtn">← Previous</button>
            <button onclick="toggleDetails()" id="toggleBtn" class="toggle-btn">Show Details</button>
            <button onclick="shuffleCard()">🔀 Random</button>
            <button onclick="nextCard()" id="nextBtn">Next →</button>
        </div>
        
        <div class="loading" id="loadingMessage">
            📚 Loading authentic Quranic roots... Please wait.
        </div>
    </div>

    <script>
        // Clean English-only data with proper Unicode
        let flashcards = [
            {
                "id": "root_1",
                "root": "ك ت ب",
                "transliteration": "k-t-b",
                "meanings": ["to write", "book", "decree"],
                "category": "knowledge",
                "type": "authentic_root",
                "difficulty": "advanced",
                "examples": [
                    {
                        "ayahArabic": "ذَٰلِكَ الْكِتَابُ لَا رَيْبَ فِيهِ هُدًى لِّلْمُتَّقِينَ",
                        "translation": "This is the Book about which there is no doubt, a guidance for those conscious of Allah",
                        "ref": "2:2"
                    }
                ]
            },
            {
                "id": "root_2",
                "root": "ق ر أ",
                "transliteration": "q-r-a",
                "meanings": ["to read", "recite"],
                "category": "knowledge",
                "type": "authentic_root",
                "difficulty": "basic",
                "examples": [
                    {
                        "ayahArabic": "اقْرَأْ بِاسْمِ رَبِّكَ الَّذِي خَلَقَ",
                        "translation": "Recite in the name of your Lord who created",
                        "ref": "96:1"
                    }
                ]
            },
            {
                "id": "root_3",
                "root": "ص ل ى",
                "transliteration": "s-l-y",
                "meanings": ["to pray", "bless"],
                "category": "worship",
                "type": "authentic_root",
                "difficulty": "basic",
                "examples": [
                    {
                        "ayahArabic": "وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ",
                        "translation": "And establish prayer and give zakah",
                        "ref": "2:43"
                    }
                ]
            }
        ];
        
        let currentIndex = 0;
        let filteredCards = [...flashcards];
        let showDetails = false;
        let readWords = new Set();
        let currentLanguage = 'english';
        let isLoading = true;

        // Load external dataset
        async function loadDataset() {
            try {
                // In a real implementation, this would load from an external JSON file
                // For now, we'll simulate loading with the sample data
                setTimeout(() => {
                    document.getElementById('loadingMessage').style.display = 'none';
                    isLoading = false;
                    displayCard();
                }, 1000);
            } catch (error) {
                console.error('Error loading dataset:', error);
                document.getElementById('loadingMessage').innerHTML = '❌ Error loading data. Using sample roots.';
                isLoading = false;
                displayCard();
            }
        }

        // Language function removed - English only

        function loadProgress() {
            const saved = localStorage.getItem('authenticQuranFlashcardsProgress');
            if (saved) {
                const data = JSON.parse(saved);
                readWords = new Set(data.readWords || []);
                currentIndex = data.lastIndex || 0;
                showDetails = data.showDetails || false;
                currentLanguage = 'english';
            }
            currentLanguage = 'english';
        }

        function saveProgress() {
            const data = {
                readWords: Array.from(readWords),
                lastIndex: currentIndex,
                showDetails: showDetails,
                preferredLanguage: 'english'
            };
            localStorage.setItem('authenticQuranFlashcardsProgress', JSON.stringify(data));
        }

        function displayMeanings(meanings) {
            if (!meanings) return 'Loading meanings...';
            return Array.isArray(meanings) ? meanings.join(', ') : meanings;
        }

        function displayTranslation(translation) {
            if (!translation) return '';
            return '<div class="translation-english">' + translation + '</div>';
        }

        function displayCard() {
            if (isLoading) return;
            
            if (filteredCards.length === 0) {
                document.getElementById('arabic').textContent = 'No results';
                document.getElementById('transliteration').textContent = '';
                document.getElementById('meanings').innerHTML = 'Try a different search';
                return;
            }
            
            const card = filteredCards[currentIndex];
            const cardElement = document.getElementById('mainCard');
            const readStatusElement = document.getElementById('readStatus');
            
            const isRead = readWords.has(card.id);
            if (isRead) {
                cardElement.classList.add('read');
                readStatusElement.classList.add('read');
                readStatusElement.textContent = '✓';
            } else {
                cardElement.classList.remove('read');
                readStatusElement.classList.remove('read');
                readStatusElement.textContent = '○';
            }
            
            document.getElementById('arabic').textContent = card.root || '';
            document.getElementById('transliteration').textContent = card.transliteration || '';
            document.getElementById('meanings').innerHTML = displayMeanings(card.meanings);
            document.getElementById('typeBadge').textContent = (card.type || 'root').toUpperCase();
            document.getElementById('categoryBadge').textContent = (card.category || '').replace(/_/g, ' ');
            document.getElementById('difficultyBadge').textContent = (card.difficulty || '').toUpperCase();
            document.getElementById('current').textContent = currentIndex + 1;
            document.getElementById('total').textContent = filteredCards.length;
            
            document.getElementById('readCount').textContent = readWords.size;
            const progressPercent = Math.round((readWords.size / flashcards.length) * 100);
            document.getElementById('progressPercent').textContent = progressPercent + '%';
            document.getElementById('progressFill').style.width = progressPercent + '%';
            
            const versesSection = document.getElementById('versesSection');
            const versesDiv = document.getElementById('verses');
            const verseCountSpan = document.getElementById('verseCount');
            
            if (showDetails && card.examples && card.examples.length > 0) {
                versesDiv.innerHTML = card.examples
                    .map(function(v) {
                        return '<div class="verse">' +
                            '<div class="verse-arabic">' + (v.ayahArabic || '') + '</div>' +
                            '<div class="verse-translation">' + displayTranslation(v.translation) + '</div>' +
                            '<div class="verse-ref">[' + (v.ref || '') + ']</div>' +
                            '</div>';
                    })
                    .join('');
                verseCountSpan.textContent = '(' + card.examples.length + ')';
                versesSection.style.display = 'block';
            } else {
                versesSection.style.display = 'none';
                verseCountSpan.textContent = '';
            }
            
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === filteredCards.length - 1;
            document.getElementById('toggleBtn').textContent = showDetails ? 'Hide Details' : 'Show Details';
            
            saveProgress();
        }

        function toggleReadStatus() {
            const card = filteredCards[currentIndex];
            if (readWords.has(card.id)) {
                readWords.delete(card.id);
            } else {
                readWords.add(card.id);
            }
            displayCard();
        }

        function toggleDetails() {
            showDetails = !showDetails;
            displayCard();
        }

        function nextCard() {
            if (currentIndex < filteredCards.length - 1) {
                currentIndex++;
                displayCard();
            }
        }

        function previousCard() {
            if (currentIndex > 0) {
                currentIndex--;
                displayCard();
            }
        }

        function shuffleCard() {
            currentIndex = Math.floor(Math.random() * filteredCards.length);
            displayCard();
        }

        function searchCards() {
            const query = document.getElementById('searchBox').value.toLowerCase().trim();
            
            if (query === '') {
                filteredCards = [...flashcards];
            } else {
                filteredCards = flashcards.filter(function(card) {
                    return (card.root || '').includes(query) ||
                           (card.transliteration || '').toLowerCase().includes(query) ||
                           JSON.stringify(card.meanings || {}).toLowerCase().includes(query) ||
                           (card.category || '').toLowerCase().includes(query);
                });
            }
            
            currentIndex = 0;
            displayCard();
        }

        let searchTimeout;
        document.getElementById('searchBox').addEventListener('input', function() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(searchCards, 300);
        });

        document.getElementById('readStatus').addEventListener('click', toggleReadStatus);

        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case 'ArrowLeft': previousCard(); break;
                case 'ArrowRight': nextCard(); break;
                case ' ': e.preventDefault(); shuffleCard(); break;
                case 'd': case 'D': toggleDetails(); break;
                case 'm': case 'M': toggleReadStatus(); break;
            }
        });

        // Initialize
        loadProgress();
        loadDataset();
        
        console.log('🌐 Authentic Quranic Arabic Flashcards loaded!');
        console.log('📊 Sample entries loaded - full dataset coming soon');
        console.log('🌍 Languages: English & Urdu support');
        console.log('⌨️ Shortcuts: D=Details, M=Mark read, Arrows=Navigate, Space=Random');
    </script>
</body>
</html>
